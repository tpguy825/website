<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<title>Friday Night Funkin': Psych Engine</title>

		<script>
			if (window.location.pathname === "/fnf") {
				window.location.replace("/fnf/");
			}

			fetch("assets/data/custom-version.txt", {cache: "force-cache"})
				.then((r) => r.text())
				.then((currentver) => {
					fetch(
						"https://raw.githubusercontent.com/tpguy825/website/main/fnf/assets/data/custom-version.txt", { cache: "no-cache" })
						.then((r) => r.text())
						.then((latestver) => {
							if (currentver !== latestver) {
								let message = [
									"Uh oh, looks like you're running an outdated version!",
									"You are running v" + currentver + " and the latest version is v" + latestver + ".",
									"Please clear your cache and refresh the page to update.",
									"Thanks!"
								];
								alert(message.join("\n"));
							}
						}).catch(e => {
							console.error("yo your internet sucks (cant get latest version)")
						});
				}).catch(e => {
					console.error("uhhhhhhh can't get your version (this should never happen caching should happen)")
				});
		</script>
		<link rel="shortcut icon" type="image/png" href="./favicon.png" />
		<script type="text/javascript" src="./PsychEngine.js"></script>

		<script>
			window.addEventListener(
				"touchmove",
				(e) => {
					e.preventDefault();
				},
				{
					capture: false,
					passive: false,
				},
			);
			if (typeof window.devicePixelRatio != "undefined" && window.devicePixelRatio > 2) {
				var meta = document.getElementById("viewport");
				meta.setAttribute(
					"content",
					"width=device-width, initial-scale=" + 2 / window.devicePixelRatio + ", user-scalable=no",
				);
			}
		</script>

		<style>
			html,
			body {
				margin: 0;
				padding: 0;
				height: 100%;
				overflow: hidden;
			}
			#openfl-content {
				background: #000000;
				width: 100%;
				height: 100%;
			}
			@font-face {
				font-family: "Pixel Arial 11 Bold";
				src: url("assets/fonts/pixel.eot?#iefix") format("embedded-opentype"),
					url("assets/fonts/pixel.woff") format("woff"),
					url("assets/fonts/pixel.otf") format("truetype");
				font-weight: normal;
				font-style: normal;
			}
			@font-face {
				font-family: "VCR OSD Mono";
				src: url("assets/fonts/vcr.eot?#iefix") format("embedded-opentype"),
					url("assets/fonts/vcr.woff") format("woff"),
					url("assets/fonts/vcr.ttf") format("truetype"),
					url("assets/fonts/vcr.svg#VCR%20OSD%20Mono") format("svg");
				font-weight: normal;
				font-style: normal;
			}
			@font-face {
				font-family: "Nokia Cellphone FC Small";
				src: url("flixel/fonts/nokiafc22.eot?#iefix") format("embedded-opentype"),
					url("flixel/fonts/nokiafc22.woff") format("woff"),
					url("flixel/fonts/nokiafc22.ttf") format("truetype"),
					url("flixel/fonts/nokiafc22.svg#Nokia%20Cellphone%20FC%20Small") format("svg");
				font-weight: normal;
				font-style: normal;
			}
			@font-face {
				font-family: "Monsterrat";
				src: url("flixel/fonts/monsterrat.eot?#iefix") format("embedded-opentype"),
					url("flixel/fonts/monsterrat.woff") format("woff"),
					url("flixel/fonts/monsterrat.ttf") format("truetype"),
					url("flixel/fonts/monsterrat.svg#Monsterrat") format("svg");
				font-weight: normal;
				font-style: normal;
			}
		</style>
	</head>
	<body>
		<noscript>
			This webpage makes extensive use of JavaScript. Please enable JavaScript in your web browser to view
			this page.
		</noscript>

		<div id="openfl-content"></div>

		<script type="text/javascript">
			lime.embed("PsychEngine", "openfl-content", 1280, 720, { parameters: {} });
		</script>
	</body>
</html>


(e=>{let[t,r,s,i,n,a,d,u,o]=e.$bridgeToMedia$;delete e.$bridgeToMedia$;let h=Symbol(),l=Symbol(),f=Symbol(),c=Symbol(),g=Symbol(),p=Symbol(),m=[],v=(e,t,r)=>e[t]=L(t,r),L=(e,t)=>Object.defineProperty(t,"name",{value:e}),S=(e,t)=>{let i={getContext:{value(e,t){return this[h]||(this[h]=(e.includes("webgl")?g:c)(this,e,t)),this[h]}}},l=v(t,"CanvasGradient",class extends e{addColorStop(...e){s(this,["addColorStop"],e,2)}}),f=v(t,"CanvasPattern",class extends e{setTransform(...e){s(this,["setTransform"],e,2)}}),c=(e,t,i)=>{let n=e[d],h=a(),f={[d]:n,[u]:h,[o]:[]},c=s(e,["getContext"],[t,i],1,h),g="getContextAttributes,getImageData,getLineDash,getTransform,isPointInPath,isPointInStroke,measureText".split(","),p={get:(e,t)=>"string"==typeof t&&t in c?"function"==typeof c[t]?(...e)=>{if(t.startsWith("create")){let r=a();if(s(f,[t],e,2,r),"createImageData"===t||"createPattern"===t){var i;return i=`${t}()`,console.warn(`${i} not implemented`),{setTransform(){}}}return new l(n,r)}let d=g.includes(t)?1:2;return s(f,[t],e,d)}:c[t]:e[t],set:(e,t,s)=>("string"==typeof t&&t in c?(c[t]!==s&&"function"!=typeof s&&r(f,[t],s),c[t]=s):e[t]=s,!0)};return new Proxy(c,p)},g=(e,t,i)=>{let n=e[d],h=a(),l={[d]:n,[u]:h,[o]:[]},f=s(e,["getContext"],[t,i],1,h),c={get:(e,t)=>"string"==typeof t?"function"!=typeof f[t]?f[t]:(...e)=>s(l,[t],e,m(t)):e[t],set:(e,t,s)=>("string"==typeof t&&t in f?(f[t]!==s&&"function"!=typeof s&&r(l,[t],s),f[t]=s):e[t]=s,!0)};return new Proxy(f,c)},p="checkFramebufferStatus,makeXRCompatible".split(","),m=e=>e.startsWith("create")||e.startsWith("get")||e.startsWith("is")||p.includes(e)?1:2;v(t,"CanvasGradient",l),v(t,"CanvasPattern",f),n(t.HTMLCanvasElement,i)},b=(e,o,h,S)=>{var b,w;S.Audio=L("HTMLAudioElement",class{constructor(e){let t=h.$createNode$("audio",a());return t.src=e,t}});let k=class extends e{get enabled(){return t(this,["enabled"])}set enabled(e){r(this,["enabled"],e)}get id(){return t(this,["id"])}get kind(){return t(this,["kind"])}get label(){return t(this,["label"])}get language(){return t(this,["language"])}get sourceBuffer(){return new B(this)}},y=class{constructor(e){let r=e[d],i=e[u],n={addEventListener(...t){s(e,["audioTracks","addEventListener"],t,3)},getTrackById:(...t)=>s(e,["audioTracks","getTrackById"],t),get length(){return t(e,["audioTracks","length"])},removeEventListener(...t){s(e,["audioTracks","removeEventListener"],t,3)}};return new Proxy(n,{get:(e,t)=>"number"==typeof t?new k(r,i,["audioTracks",t]):e[t]})}},E=v(S,"SourceBufferList",class extends Array{constructor(e){super(),this[l]=e}addEventListener(...e){s(this[l],["sourceBuffers","addEventListener"],e,3)}removeEventListener(...e){s(this[l],["sourceBuffers","removeEventListener"],e,3)}}),B=v(S,"SourceBuffer",(w=class extends o{constructor(e){super(e[d],e[u],["sourceBuffers"]),this[b]=[],this[l]=e}abort(){let e=R(this);s(this,[e,"appendWindowStart"],m,1)}addEventListener(...e){let t=R(this);s(this,[t,"addEventListener"],e,3)}appendBuffer(e){this[g].push(["appendBuffer",[e],e]),W(this)}get appendWindowStart(){let e=R(this);return t(this,[e,"appendWindowStart"])}set appendWindowStart(e){let t=R(this);r(this,[t,"appendWindowStart"],e)}get appendWindowEnd(){let e=R(this);return t(this,[e,"appendWindowEnd"])}set appendWindowEnd(e){let t=R(this);r(this,[t,"appendWindowEnd"],e)}get buffered(){let e=this[l],t=R(this),r=new x(e[d],e[u],["sourceBuffers",t,"buffered"]);return r}changeType(e){let t=R(this);s(this,[t,"changeType"],[e],2)}get mode(){let e=R(this);return t(this,[e,"mode"])}set mode(e){let t=R(this);r(this,[t,"mode"],e)}remove(e,t){this[g].push(["remove",[e,t]]),W(this)}removeEventListener(...e){let t=R(this);s(this,[t,"removeEventListener"],e,3)}get timestampOffset(){let e=R(this);return t(this,[e,"timestampOffset"])}set timestampOffset(e){let t=R(this);r(this,[t,"timestampOffset"],e)}get updating(){let e=R(this);return t(this,[e,"updating"])}},b=g,w)),x=v(S,"TimeRanges",class extends e{start(...e){return s(this,["start"],e)}end(...e){return s(this,["end"],e)}get length(){return t(this,["length"])}}),R=e=>{if(e){let t=e[l],r=t[c];return r.indexOf(e)}return -1},W=e=>{if(e[g].length){if(!e.updating){let t=e[g].shift();if(t){let r=R(e);s(e,[r,t[0]],t[1],3,void 0,t[2])}}setTimeout(()=>W(e),50)}},C={buffered:{get(){return this[p]||(this[p]=new x(this[d],this[u],["buffered"]),setTimeout(()=>{this[p]=void 0},5e3)),this[p]}},readyState:{get(){return 4===this[f]?4:("number"!=typeof this[f]&&(this[f]=t(this,["readyState"]),setTimeout(()=>{this[f]=void 0},1e3)),this[f])}}};v(S,"MediaSource",class extends o{constructor(){super(h.$winId$),this[c]=new E(this),i(this,"MediaSource",m)}get activeSourceBuffers(){return[]}addSourceBuffer(e){let t=new B(this);return this[c].push(t),s(this,["addSourceBuffer"],[e]),t}clearLiveSeekableRange(){s(this,["clearLiveSeekableRange"],m,2)}get duration(){return t(this,["duration"])}set duration(e){r(this,["duration"],e)}endOfStream(e){s(this,["endOfStream"],[e],3)}get readyState(){return t(this,["readyState"])}removeSourceBuffer(e){let t=R(e);t>-1&&(this[c].splice(t,1),s(this,["removeSourceBuffer"],[t],1))}setLiveSeekableRange(e,t){s(this,["setLiveSeekableRange"],[e,t],2)}get sourceBuffers(){return this[c]}static isTypeSupported(e){if(!T.has(e)){let t=s(S,["MediaSource","isTypeSupported"],[e]);T.set(e,t)}return T.get(e)}});let M=S.URL=L("URL",class extends URL{}),O="audioTracks"in S.HTMLMediaElement.prototype;O&&(v(S,"AudioTrackList",y),v(S,"AudioTrack",k),C.audioTracks={get(){return new y(this)}}),n(S.HTMLMediaElement,C),M.createObjectURL=e=>s(S,["URL","createObjectURL"],[e]),M.revokeObjectURL=e=>s(S,["URL","revokeObjectURL"],[e])},T=new Map;e.$bridgeFromMedia$=(e,t,r,s,i)=>{i.map(e=>{delete s[e]}),S(e,s),b(e,t,r,s)}})(self);